#:import Factory kivy.factory.Factory


<Optimize>:
    orientation: "vertical"
    spacing: dp(12)
    padding: dp(12)
    BackBox:
        orientation: "vertical"
        size_hint_y: .2
        Text:
            text: "Strategies Optimizer"
            color: app.colors.primary
            font_size: app.fonts.size.h2
            font_name: app.fonts.heading
            halign: 'center'
            valign: "center"
        Text:
            text: "Fill the form"
            color: app.colors.white
            font_size: app.fonts.size.h5
            font_name: app.fonts.body
            halign: 'center'
            valign: "top"
    BackBox:
        orientation: "vertical"
        size_hint_y: .8
        spacing: dp(12)
        valign: "top"
        BackBox:
            radius: [dp(8)]
            size_hint_y: None
            height: dp(30)
            padding: [dp(8), 0]
            bcolor: app.colors.secondary
            BlankSpinner:
                id: cex
                text: "Choose a CEX"
                values: ['Binance', '.']
                option_cls: Factory.get("MySpinnerOption")
        BackBox:
            radius: [dp(8)]
            padding: [dp(8), 0]
            size_hint_y: None
            height: dp(30)
            bcolor: app.colors.secondary
            BlankTextField:
                id: symbol
                halign: 'center'
                hint_text: "Choose a symbol"
        BackBox:
            id: backbox_strategy
            radius: [dp(8)]
            size_hint_y: None
            height: dp(30)
            padding: [dp(8), 0]
            bcolor: app.colors.secondary
            BlankSpinner:
                id: strategy
                text: "Choose a strategy"
                values: ['On-balance volume', 'Ichimoku Kinko Hyo']
                option_cls: Factory.get("MySpinnerOption")
        BackBox:
            id: backbox_timeframe
            radius: [dp(8)]
            padding: [dp(8), 0]
            size_hint_y: None
            height: dp(30)
            bcolor: app.colors.secondary
            BlankSpinner:
                id: timeframe
                text: "Choose a timeframe"
                values: ['1m', '5m', '15m', '30m', '1h', '4h', '12h', '1d']
                option_cls: Factory.get("MySpinnerOption")
        BackBox:
            id: backbox_from_time
            radius: [dp(8)]
            size_hint_y: None
            height: dp(30)
            padding: [dp(8), 0]
            bcolor: app.colors.secondary
            BlankTextField:
                id: from_time
                halign: 'center'
                hint_text: "Backtest from (yyyy-mm-dd) or default"
        BackBox:
            id: backbox_to_time
            radius: [dp(8)]
            padding: [dp(8), 0]
            size_hint_y: None
            height: dp(30)
            bcolor: app.colors.secondary
            BlankTextField:
                id: to_time
                halign: 'center'
                hint_text: "Backtest to (yyyy-mm-dd) or default"
        BackBox:
            id: backbox_popsize
            radius: [dp(8)]
            size_hint_y: None
            height: dp(30)
            padding: [dp(8), 0]
            bcolor: app.colors.secondary
            BlankTextField:
                id: popsize
                halign: 'center'
                hint_text: "Choose a population size"
        BackBox:
            id: backbox_gennum
            radius: [dp(8)]
            size_hint_y: None
            height: dp(30)
            padding: [dp(8), 0]
            bcolor: app.colors.secondary
            BlankTextField:
                id: gennum
                halign: 'center'
                hint_text: "Choose a number of generations"
        Widget:
            size_hint_y: None
            height: dp(72)
    RoundedButton:
        text: "Optimize"
        color: app.colors.white
        font_name: app.fonts.subheading
        radius: [dp(8)]
        bcolor: app.colors.primary
        size_hint_y: None
        height: dp(30)
        on_release: root.optimize()
    FlatButton:
        text: "Back"
        color: app.colors.primary
        font_name: app.fonts.body
        radius: [dp(8)]
        size_hint_y: None
        height: dp(20)
        valign: "top"
        on_release: app.root.ids.scrn_mngr.current = 'scrn_home'
    

    